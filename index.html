<!DOCTYPE html>
<html>
<head>
	<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script> -->
</head>
<body>
	<p id="demo" onclick="myFunction()">Click me.</p>
	
	<button onclick="myFunction1()">Click me</button>

<script>
	

    function test(){
        var x0 = '1';
        var x1 = 'Toado';
        var x2 =  "https://3nhat.github.io/AIO/testWorker.js";
        var x3 = "NoStringFunc";
        //var x2 =  "NoLink";
        //var x3 = "function Q() {self.addEventListener('message', function(e) { T(e); }, false); } function T(e){"
        //x3 = x3 + " postMessage(e.data);} Q();";

        var x4 = 'Func_Run02a';
        var x5 = 'QT';
        var x6 = 'Cộng hoà xã hội';
        var exp = x0 + ' ]TTT[ ' + x1 + ' ]TTT[ ' + x2 + ' ]TTT[ ' + x3 + ' ]TTT[ ' + x4 + ' ]TTT[ ' + x5 + ' ]TTT[ ' + x6;
        
        Q0002(exp);

    }
   
    
    function Q0002(exp){

        var arr = exp.split(']TTT[');
        var x0 = arr[0].trim(); //xác định tạo hay xoá hay gửi thông tin
      	var x1 = arr[1].trim(); //Biến lưu trên worker.js
      	var x2 = arr[2].trim(); //Đường dẫn file worker.js
        var x3 = arr[3].trim(); //Chuỗi tạo hàm chạy cho worker
        var x4 = arr[4].trim(); //Hàm nhận thông tin worker trả về
        var x5 = arr[5].trim(); //tên biến của Hàm nhận thông tin worker trả về
        var x6 = arr[6].trim(); //Nội dung gửi worker
    	
        
        function startWorker(){
        
			 if(typeof(Worker)!=="undefined") {
            	
              	if(x3=='NoStringFunc'){
                  window.window[x1] = new Worker(x2); 
              	} else {
                  var blob = new Blob([x3]);
                  var blobURL = window.URL.createObjectURL(blob);
                  window.window[x1] = new Worker(blobURL);
              	}
              	window[x1].onmessage = function (event) { 
               		window.window[x5] = event.data;
              		window[x4](x5);
              	};
                  
          	} else {
          		alert("Sorry, your browser does not support Web Workers...");
          	}
        }

        function stopWorker(){ 
        	window[x1].terminate(); 
        }
        
        
        
        if(x0=='1') startWorker();
        if(x0=='0') stopWorker();
        if(x0=='2') window[x1].postMessage(['none',x6]);

    }
    
    window.window['Func_Run02a'] = function(x5){
	    //this['Quang'] = new Function('return ' + window[x5][1])();
		alert(window[x5]);   
    }
	
function myFunction1(){
	var a=window['Quang'](2,3);
    alert(a);
}
    
    test();
	
	function myFunction(){

		var x0 = '2';
        var x1 = 'Toado';
        var x2 =  "NoLink"
        var x3 = "NoStringFunc";
        var x4 = 'Func_Run02a';
        var x5 = 'QT';
        //var x6 = 'Cộng hoà xã hội';
	var x6 = 'https://docs.google.com/feeds/download/documents/export/Export?id=1XpfiX288y98rw3B_xLDs2ybCrrTsubXcytjoXM0dezU&exportFormat=txt';
        var exp = x0 + ' ]TTT[ ' + x1 + ' ]TTT[ ' + x2 + ' ]TTT[ ' + x3 + ' ]TTT[ ' + x4 + ' ]TTT[ ' + x5 + ' ]TTT[ ' + x6;
        
	Q0002(exp);
	
	}

</script>

</body>
</html>
